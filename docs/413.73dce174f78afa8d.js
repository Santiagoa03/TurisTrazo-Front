"use strict";(self.webpackChunkturisTrazo=self.webpackChunkturisTrazo||[]).push([[413],{2413:(_,p,i)=>{i.r(p),i.d(p,{GestionAdminModule:()=>A});var l=i(6895),n=i(2045),t=i(8256),g=i(7185),m=i(7440),u=i(7279);function x(r,b){if(1&r){const e=t.EpF();t.TgZ(0,"tr",9)(1,"td",10),t._uU(2),t.qZA(),t.TgZ(3,"td",10),t._uU(4),t.qZA(),t.TgZ(5,"td",10),t._uU(6),t.qZA(),t.TgZ(7,"td",10),t._uU(8),t.qZA(),t.TgZ(9,"td",10),t._uU(10),t.qZA(),t.TgZ(11,"td",10),t._uU(12),t.qZA(),t.TgZ(13,"td",11)(14,"button",12),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.verTour(c.id||0))}),t._uU(15,"Ver detalles"),t.qZA(),t.TgZ(16,"button",13),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.aprobar(c))}),t._uU(17,"Aprobar"),t.qZA(),t.TgZ(18,"button",14),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.eliminar(c.id||0))}),t._uU(19,"Eliminar"),t.qZA()()()}if(2&r){const e=b.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.hij("",null==e.guia||null==e.guia.usuario?null:e.guia.usuario.nombre," "),t.xp6(2),t.hij("",null==e.barrioMedellin?null:e.barrioMedellin.nombre," "),t.xp6(2),t.hij("",e.descripcion," "),t.xp6(2),t.hij("",e.precioPersona," ")}}function o(r,b){1&r&&(t.TgZ(0,"div",15),t._uU(1," No hay datos "),t.qZA())}const T=[{path:"",component:(()=>{class r{constructor(e,s,a,c){this.toastr=e,this.authService=s,this.tourService=a,this.router=c,this.tourNoValidate=[]}ngOnInit(){this.authService.isAdmin()?(this.tourService.tour$.subscribe(e=>{this.tourNoValidate=e}),this.tourService.getAllNotValidated().subscribe(e=>{this.tourNoValidate=e})):this.router.navigateByUrl("")}verTour(e){this.router.navigateByUrl(`/tour/${e}`)}aprobar(e){e.validado=!0,this.tourService.saveTour(e).subscribe(()=>{this.toastr.success("Se ha aprobado el tour")},()=>{this.toastr.error("Error al aprobar el tour")})}eliminar(e){this.tourService.deleteTour(e).subscribe(()=>{this.toastr.success("El tour ha sido eliminado correctamente")},()=>{this.toastr.error("Error al eliminar tour")})}static#t=this.\u0275fac=function(s){return new(s||r)(t.Y36(g._W),t.Y36(m.e),t.Y36(u.Q),t.Y36(n.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["gestion-tour"]],decls:25,vars:2,consts:[[1,"text-gray-900","bg-gray-200","m-auto","w-11/12","overflow-scroll"],[1,"p-4","flex"],[1,"text-3xl","m-auto","font-bold"],[1,"px-3","py-4","flex","justify-center"],[1,"w-full","text-md","bg-white","shadow-md","rounded","mb-4"],[1,"border-b"],[1,"text-left","p-3","px-5"],["class","border-b hover:bg-orange-100 bg-gray-100",4,"ngFor","ngForOf"],["class","m-auto text-center",4,"ngIf"],[1,"border-b","hover:bg-orange-100","bg-gray-100"],[1,"p-3","px-5"],[1,"p-3","px-5","flex","justify-start"],["type","button",1,"mr-3","text-sm","bg-indigo-600","hover:bg-blue-700","text-white","py-1","px-2","rounded","focus:outline-none","focus:shadow-outline",3,"click"],["type","button",1,"mr-3","text-sm","bg-green-900","hover:bg-blue-700","text-white","py-1","px-2","rounded","focus:outline-none","focus:shadow-outline",3,"click"],["type","button",1,"mr-3","text-sm","bg-red-600","hover:bg-blue-700","text-white","py-1","px-2","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"m-auto","text-center"]],template:function(s,a){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3," Gesti\xf3n de tour "),t.qZA()(),t.TgZ(4,"div",3)(5,"table",4)(6,"tbody")(7,"tr",5)(8,"th",6),t._uU(9,"id "),t.qZA(),t.TgZ(10,"th",6),t._uU(11,"Nombre "),t.qZA(),t.TgZ(12,"th",6),t._uU(13,"Gu\xeda"),t.qZA(),t.TgZ(14,"th",6),t._uU(15,"Barrio"),t.qZA(),t.TgZ(16,"th",6),t._uU(17,"Descripci\xf3n"),t.qZA(),t.TgZ(18,"th",6),t._uU(19,"Precio Persona"),t.qZA(),t.TgZ(20,"th",6),t._uU(21,"Acciones"),t.qZA(),t._UZ(22,"th"),t.qZA(),t.YNc(23,x,20,6,"tr",7),t.qZA()()(),t.YNc(24,o,2,0,"div",8),t.qZA()),2&s&&(t.xp6(23),t.Q6J("ngForOf",a.tourNoValidate),t.xp6(1),t.Q6J("ngIf",0===a.tourNoValidate.length))},dependencies:[l.sg,l.O5]})}return r})()},{path:"**",redirectTo:""}];let f=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[n.Bz.forChild(T),n.Bz]})}return r})(),A=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[l.ez,f]})}return r})()},7279:(_,p,i)=>{i.d(p,{Q:()=>m});var l=i(7579),n=i(8505),t=i(8256),g=i(529);let m=(()=>{class u{constructor(o){this.http=o,this.URL_API="/api/tour",this.tourSubject=new l.x,this.tour$=this.tourSubject.asObservable()}getAllTour(){return this.http.get(`${this.URL_API}`)}findTourById(o){return this.http.get(`${this.URL_API}/${o}`)}getAllNotValidated(){return this.http.get(`${this.URL_API}/notvalidated`).pipe((0,n.b)(o=>{this.tourSubject.next(o)}))}sendUpdate(){this.getAllNotValidated().subscribe(o=>{this.tourSubject.next(o)})}deleteTour(o){return this.http.delete(`${this.URL_API}/${o}`).pipe((0,n.b)(()=>{this.sendUpdate()}))}saveTour(o){return o.imagen=this.deleteApiImage(o.imagen),this.http.post(`${this.URL_API}`,o).pipe((0,n.b)(()=>{this.sendUpdate()}))}deleteApiImage(o){const d=o.lastIndexOf("/");return-1!==d?o.substring(d+1):o}static#t=this.\u0275fac=function(d){return new(d||u)(t.LFG(g.eN))};static#e=this.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);